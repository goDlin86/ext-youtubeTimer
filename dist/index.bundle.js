(()=>{var t={484:function(t){t.exports=function(){"use strict";var t="millisecond",e="second",s="minute",i="hour",n="day",r="week",a="month",o="quarter",u="year",d="date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,c=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},l=function(t,e,s){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(s)+t},m={s:l,z:function(t){var e=-t.utcOffset(),s=Math.abs(e),i=Math.floor(s/60),n=s%60;return(e<=0?"+":"-")+l(i,2,"0")+":"+l(n,2,"0")},m:function t(e,s){if(e.date()<s.date())return-t(s,e);var i=12*(s.year()-e.year())+(s.month()-e.month()),n=e.clone().add(i,a),r=s-n<0,o=e.clone().add(i+(r?-1:1),a);return+(-(i+(s-n)/(r?n-o:o-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:a,y:u,w:r,d:n,D:d,h:i,m:s,s:e,ms:t,Q:o}[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",$={};$[v]=f;var y=function(t){return t instanceof D},M=function(t,e,s){var i;if(!t)return v;if("string"==typeof t)$[t]&&(i=t),e&&($[t]=e,i=t);else{var n=t.name;$[n]=t,i=n}return!s&&i&&(v=i),i||!s&&v},_=function(t,e){if(y(t))return t.clone();var s="object"==typeof e?e:{};return s.date=t,s.args=arguments,new D(s)},g=m;g.l=M,g.i=y,g.w=function(t,e){return _(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var D=function(){function f(t){this.$L=M(t.locale,null,!0),this.parse(t)}var l=f.prototype;return l.parse=function(t){this.$d=function(t){var e=t.date,s=t.utc;if(null===e)return new Date(NaN);if(g.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(h);if(i){var n=i[2]-1||0,r=(i[7]||"0").substring(0,3);return s?new Date(Date.UTC(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)):new Date(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},l.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},l.$utils=function(){return g},l.isValid=function(){return!("Invalid Date"===this.$d.toString())},l.isSame=function(t,e){var s=_(t);return this.startOf(e)<=s&&s<=this.endOf(e)},l.isAfter=function(t,e){return _(t)<this.startOf(e)},l.isBefore=function(t,e){return this.endOf(e)<_(t)},l.$g=function(t,e,s){return g.u(t)?this[e]:this.set(s,t)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(t,o){var h=this,c=!!g.u(o)||o,f=g.p(t),l=function(t,e){var s=g.w(h.$u?Date.UTC(h.$y,e,t):new Date(h.$y,e,t),h);return c?s:s.endOf(n)},m=function(t,e){return g.w(h.toDate()[t].apply(h.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),h)},v=this.$W,$=this.$M,y=this.$D,M="set"+(this.$u?"UTC":"");switch(f){case u:return c?l(1,0):l(31,11);case a:return c?l(1,$):l(0,$+1);case r:var _=this.$locale().weekStart||0,D=(v<_?v+7:v)-_;return l(c?y-D:y+(6-D),$);case n:case d:return m(M+"Hours",0);case i:return m(M+"Minutes",1);case s:return m(M+"Seconds",2);case e:return m(M+"Milliseconds",3);default:return this.clone()}},l.endOf=function(t){return this.startOf(t,!1)},l.$set=function(r,o){var h,c=g.p(r),f="set"+(this.$u?"UTC":""),l=(h={},h[n]=f+"Date",h[d]=f+"Date",h[a]=f+"Month",h[u]=f+"FullYear",h[i]=f+"Hours",h[s]=f+"Minutes",h[e]=f+"Seconds",h[t]=f+"Milliseconds",h)[c],m=c===n?this.$D+(o-this.$W):o;if(c===a||c===u){var v=this.clone().set(d,1);v.$d[l](m),v.init(),this.$d=v.set(d,Math.min(this.$D,v.daysInMonth())).$d}else l&&this.$d[l](m);return this.init(),this},l.set=function(t,e){return this.clone().$set(t,e)},l.get=function(t){return this[g.p(t)]()},l.add=function(t,o){var d,h=this;t=Number(t);var c=g.p(o),f=function(e){var s=_(h);return g.w(s.date(s.date()+Math.round(e*t)),h)};if(c===a)return this.set(a,this.$M+t);if(c===u)return this.set(u,this.$y+t);if(c===n)return f(1);if(c===r)return f(7);var l=(d={},d[s]=6e4,d[i]=36e5,d[e]=1e3,d)[c]||1,m=this.$d.getTime()+t*l;return g.w(m,this)},l.subtract=function(t,e){return this.add(-1*t,e)},l.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var s=t||"YYYY-MM-DDTHH:mm:ssZ",i=g.z(this),n=this.$locale(),r=this.$H,a=this.$m,o=this.$M,u=n.weekdays,d=n.months,h=function(t,i,n,r){return t&&(t[i]||t(e,s))||n[i].substr(0,r)},f=function(t){return g.s(r%12||12,t,"0")},l=n.meridiem||function(t,e,s){var i=t<12?"AM":"PM";return s?i.toLowerCase():i},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:g.s(o+1,2,"0"),MMM:h(n.monthsShort,o,d,3),MMMM:h(d,o),D:this.$D,DD:g.s(this.$D,2,"0"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,u,2),ddd:h(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(r),HH:g.s(r,2,"0"),h:f(1),hh:f(2),a:l(r,a,!0),A:l(r,a,!1),m:String(a),mm:g.s(a,2,"0"),s:String(this.$s),ss:g.s(this.$s,2,"0"),SSS:g.s(this.$ms,3,"0"),Z:i};return s.replace(c,(function(t,e){return e||m[t]||i.replace(":","")}))},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(t,d,h){var c,f=g.p(d),l=_(t),m=6e4*(l.utcOffset()-this.utcOffset()),v=this-l,$=g.m(this,l);return $=(c={},c[u]=$/12,c[a]=$,c[o]=$/3,c[r]=(v-m)/6048e5,c[n]=(v-m)/864e5,c[i]=v/36e5,c[s]=v/6e4,c[e]=v/1e3,c)[f]||v,h?$:g.a($)},l.daysInMonth=function(){return this.endOf(a).$D},l.$locale=function(){return $[this.$L]},l.locale=function(t,e){if(!t)return this.$L;var s=this.clone(),i=M(t,e,!0);return i&&(s.$L=i),s},l.clone=function(){return g.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},f}(),p=D.prototype;return _.prototype=p,[["$ms",t],["$s",e],["$m",s],["$H",i],["$W",n],["$M",a],["$y",u],["$D",d]].forEach((function(t){p[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),_.extend=function(t,e){return t.$i||(t(e,D,_),t.$i=!0),_},_.locale=M,_.isDayjs=y,_.unix=function(t){return _(1e3*t)},_.en=$[v],_.Ls=$,_.p={},_}()},600:function(t,e,s){t.exports=function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),s="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),i="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),n="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),r=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function a(t,e,s){var i,n;return"m"===s?e?"минута":"минуту":t+" "+(i=+t,n={mm:e?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[s].split("_"),i%10==1&&i%100!=11?n[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?n[1]:n[2])}var o=function(t,i){return r.test(i)?e[t.month()]:s[t.month()]};o.s=s,o.f=e;var u=function(t,e){return r.test(e)?i[t.month()]:n[t.month()]};u.s=n,u.f=i;var d={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:o,monthsShort:u,weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:a,mm:a,h:"час",hh:a,d:"день",dd:a,M:"месяц",MM:a,y:"год",yy:a},ordinal:function(t){return t}};return t.locale(d,null,!0),d}(s(484))},646:function(t){t.exports=function(){"use strict";var t,e,s=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,i=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,n={years:31536e6,months:2592e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},r=function(t){return t instanceof c},a=function(t,e,s){return new c(t,s,e.$l)},o=function(t){return e.p(t)+"s"},u=function(t){return t<0},d=function(t){return u(t)?Math.ceil(t):Math.floor(t)},h=function(t,e){return t?u(t)?{negative:!0,format:""+function(t){return Math.abs(t)}(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}},c=function(){function u(t,e,s){var r=this;if(this.$d={},this.$l=s,e)return a(t*n[o(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(e){r.$d[o(e)]=t[e]})),this.calMilliseconds(),this;if("string"==typeof t){var u=t.match(i);if(u)return this.$d.years=u[2],this.$d.months=u[3],this.$d.weeks=u[4],this.$d.days=u[5],this.$d.hours=u[6],this.$d.minutes=u[7],this.$d.seconds=u[8],this.calMilliseconds(),this}return this}var c=u.prototype;return c.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(e,s){return e+(t.$d[s]||0)*n[s]}),0)},c.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=d(t/31536e6),t%=31536e6,this.$d.months=d(t/2592e6),t%=2592e6,this.$d.days=d(t/864e5),t%=864e5,this.$d.hours=d(t/36e5),t%=36e5,this.$d.minutes=d(t/6e4),t%=6e4,this.$d.seconds=d(t/1e3),t%=1e3,this.$d.milliseconds=t},c.toISOString=function(){var t=h(this.$d.years,"Y"),e=h(this.$d.months,"M"),s=+this.$d.days||0;this.$d.weeks&&(s+=7*this.$d.weeks);var i=h(s,"D"),n=h(this.$d.hours,"H"),r=h(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var o=h(a,"S"),u=t.negative||e.negative||i.negative||n.negative||r.negative||o.negative,d=n.format||r.format||o.format?"T":"",c=(u?"-":"")+"P"+t.format+e.format+i.format+d+n.format+r.format+o.format;return"P"===c||"-P"===c?"P0D":c},c.toJSON=function(){return this.toISOString()},c.format=function(t){var i=t||"YYYY-MM-DDTHH:mm:ss",n={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return i.replace(s,(function(t,e){return e||String(n[t])}))},c.as=function(t){return this.$ms/n[o(t)]},c.get=function(t){var e=this.$ms,s=o(t);return"milliseconds"===s?e%=1e3:e="weeks"===s?d(e/n[s]):this.$d[s],0===e?0:e},c.add=function(t,e,s){var i;return i=e?t*n[o(e)]:r(t)?t.$ms:a(t,this).$ms,a(this.$ms+i*(s?-1:1),this)},c.subtract=function(t,e){return this.add(t,e,!0)},c.locale=function(t){var e=this.clone();return e.$l=t,e},c.clone=function(){return a(this.$ms,this)},c.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},c.milliseconds=function(){return this.get("milliseconds")},c.asMilliseconds=function(){return this.as("milliseconds")},c.seconds=function(){return this.get("seconds")},c.asSeconds=function(){return this.as("seconds")},c.minutes=function(){return this.get("minutes")},c.asMinutes=function(){return this.as("minutes")},c.hours=function(){return this.get("hours")},c.asHours=function(){return this.as("hours")},c.days=function(){return this.get("days")},c.asDays=function(){return this.as("days")},c.weeks=function(){return this.get("weeks")},c.asWeeks=function(){return this.as("weeks")},c.months=function(){return this.get("months")},c.asMonths=function(){return this.as("months")},c.years=function(){return this.get("years")},c.asYears=function(){return this.as("years")},u}();return function(s,i,n){t=n,e=n().$utils(),n.duration=function(t,e){var s=n.locale();return a(t,{$l:s},e)},n.isDuration=r;var o=i.prototype.add,u=i.prototype.subtract;i.prototype.add=function(t,e){return r(t)&&(t=t.asMilliseconds()),o.bind(this)(t,e)},i.prototype.subtract=function(t,e){return r(t)&&(t=t.asMilliseconds()),u.bind(this)(t,e)}}}()}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,s),r.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var e=s(484),i=s.n(e),n=(s(600),s(646)),r=s.n(n);i().locale("ru"),i().extend(r()),new(function(){function e(){var t=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.timerEl=document.getElementById("timer"),this.today=i()().format("YYYY-MM-DD"),this.startWeek=i()().startOf("week"),this.currentWeekTime=0,this.store=[],this.daysWeek=[],this.showWeekDays(),chrome.storage.sync.get("store",(function(e){!chrome.runtime.error&&e.store&&(t.store=e.store),t.showWeekTimes(),t.connect()})),document.getElementsByClassName("prev")[0].addEventListener("click",(function(e){t.changeWeek(-7)})),document.getElementsByClassName("next")[0].addEventListener("click",(function(e){t.changeWeek(7)}))}var s,n;return s=e,(n=[{key:"showWeekDays",value:function(){for(var t=0;t<7;t++){var e=this.startWeek.clone().add(t,"d");this.daysWeek.push(e.format("YYYY-MM-DD")),this.timerEl.innerHTML+="<div class='day'>"+e.format("dddd")+"<br/>"+e.format("D MMM")+"</div>",this.timerEl.innerHTML+="<div class='time'></div>"}this.timerEl.innerHTML+="<div class='allday'>Всего</div>",this.timerEl.innerHTML+="<div class='time'></div>"}},{key:"showWeekTimes",value:function(){var t=this;this.currentWeekTime=0;for(var e=function(e){var s=t.store.findIndex((function(s){return s.date===t.daysWeek[e]}));if(s>-1){t.currentWeekTime+=t.store[s].timer;var n=i().duration(t.store[s].timer,"seconds");t.showTime(n,e),t.today===t.store[s].date&&(document.getElementsByClassName("day")[e].classList.add("today"),document.getElementsByClassName("time")[e].classList.add("today"))}else t.today===t.daysWeek[e]&&(document.getElementsByClassName("day")[e].classList.add("today"),document.getElementsByClassName("time")[e].classList.add("today"))},s=0;s<7;s++)e(s);var n=i().duration(this.currentWeekTime,"seconds");this.showTime(n,7),this.startTime&&document.getElementsByClassName("today")[0]&&this.startTimer()}},{key:"showTime",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.hours()+24*t.days(),n=[Math.floor(i/10%10),i%10,Math.floor(t.minutes()/10%10),t.minutes()%10,Math.floor(t.seconds()/10%10),t.seconds()%10],r="";s?(r='<div class="clock anim">',r+='<div class="digit hoursTen" style="animation-delay:-'+(3600*n[1]+60*t.minutes()+t.seconds())+'s">'+this.timerDigits(n[0],6)+"</div>",r+='<div class="digit hours" style="animation-delay:-'+(60*t.minutes()+t.seconds())+'s">'+this.timerDigits(n[1],10)+"</div>",r+="<div>:</div>",r+='<div class="digit minsTen" style="animation-delay:-'+(t.seconds()+60*n[3])+'s">'+this.timerDigits(n[2],6)+"</div>",r+='<div class="digit mins" style="animation-delay:-'+t.seconds()+'s">'+this.timerDigits(n[3],10)+"</div>",r+="<div>:</div>",r+='<div class="digit secsTen" style="animation-delay:-'+n[5]+'s">'+this.timerDigits(n[4],6)+"</div>",r+='<div class="digit secs">'+this.timerDigits(n[5],10)+"</div>"):(r='<div class="clock">',r+='<div class="digit hoursTen">'+n[0]+"</div>",r+='<div class="digit hours">'+n[1]+"</div>",r+="<div>:</div>",r+='<div class="digit minsTen">'+n[2]+"</div>",r+='<div class="digit mins">'+n[3]+"</div>",r+="<div>:</div>",r+='<div class="digit secsTen">'+n[4]+"</div>",r+='<div class="digit secs">'+n[5]+"</div>"),document.getElementsByClassName("time")[e].innerHTML=r}},{key:"timerDigits",value:function(t,e){for(var s="",i=0;i<e;i++){var n=i+t;n>=e&&(n-=e),s+="<div>"+n+"</div>"}return s}},{key:"connect",value:function(){}},{key:"startTimer",value:function(){var t=this,e=this.store.find((function(e){return e.date===t.today})),s=void 0===e?0:e.timer,n=i().duration(s,"seconds");this.timerDur=n.add(((new Date).getTime()-this.startTime)/1e3,"s"),this.timerI=0==i()().day()?6:i()().day()-1;var r=i().duration(this.currentWeekTime,"seconds");this.timerDurWeek=r.add(((new Date).getTime()-this.startTime)/1e3,"s"),this.showTime(this.timerDur,this.timerI,!0),this.showTime(this.timerDurWeek,7,!0)}},{key:"changeWeek",value:function(t){clearInterval(this.timerInterval),this.timerEl.innerHTML="",this.startWeek=this.startWeek.add(t,"d"),this.daysWeek=[],this.showWeekDays(),this.showWeekTimes()}}])&&t(s.prototype,n),e}())})()})();